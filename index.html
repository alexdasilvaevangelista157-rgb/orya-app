<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Orya</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

<style>
body{
background:#000;
color:white;
font-family:Arial;
margin:0;
}

header{
display:flex;
justify-content:space-between;
align-items:center;
padding:15px;
font-size:22px;
font-weight:bold;
}

button{
background:#00ff88;
border:none;
padding:12px 18px;
border-radius:10px;
font-weight:bold;
}

#feed{
padding:15px;
margin-bottom:80px;
}

.post{
background:#111;
padding:15px;
margin-bottom:10px;
border-radius:12px;
}

input{
width:70%;
padding:12px;
border-radius:10px;
border:none;
background:#111;
color:white;
}

#login{
display:flex;
flex-direction:column;
gap:10px;
padding:30px;
}
</style>
</head>

<body>

<div id="login">
<h2>üåç Orya</h2>
<input id="email" placeholder="Email">
<input id="senha" placeholder="Senha" type="password">
<button onclick="login()">Entrar</button>
<button onclick="criar()">Criar conta</button>
</div>

<div id="app" style="display:none">
<header>
<span>üåç Orya</span>
<button onclick="sair()">Sair</button>
</header>

<div id="feed"></div>

<div style="position:fixed;bottom:0;width:100%;display:flex;padding:10px;background:black">
<input id="texto" placeholder="Diga oi pro mundo...">
<button onclick="postar()">Publicar</button>
</div>
</div>

<script>
const supabase = window.supabase.createClient(
"https://qflchnlaxtqgfvtqgtsl.supabase.co",
"sb_publishable_OFch53maJWq8evi16POsQQ_8z3Fp916"
);

async function criar(){
let email=document.getElementById("email").value;
let senha=document.getElementById("senha").value;

await supabase.auth.signUp({email:email,password:senha});
alert("Conta criada. Fa√ßa login.");
}

async function login(){
let email=document.getElementById("email").value;
let senha=document.getElementById("senha").value;

let {error}=await supabase.auth.signInWithPassword({email:email,password:senha});
if(!error){
iniciar();
}
}

async function iniciar(){
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="block";
carregar();
}

async function postar(){
let texto=document.getElementById("texto").value;
if(!texto) return;

let { data: { user } } = await supabase.auth.getUser();

await supabase.from("posts").insert([{
texto:texto,
user_id:user.id
}]);

document.getElementById("texto").value="";
carregar();
}

async function carregar(){
let {data}=await supabase.from("posts").select("*").order("id",{ascending:false});

let feed=document.getElementById("feed");
feed.innerHTML="";

if(!data) return;

data.forEach(p=>{
feed.innerHTML+=`<div class="post">${p.texto}</div>`;
});
}

async function sair(){
await supabase.auth.signOut();
location.reload();
}

supabase.auth.getSession().then(({data})=>{
if(data.session) iniciar();
});
</script>

</body>
</html>
<!-- atualiza√ß√£o -->

